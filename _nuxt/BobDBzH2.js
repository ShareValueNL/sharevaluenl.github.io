import{d as w,a as y,b as x,r,w as R,e as b,f as l,o as c,u as d,g as a,t as v}from"./4g552CHT.js";const f=globalThis.setInterval,$={class:"qr-redirect-container p-4 max-w-md mx-auto text-center"},C={key:0,class:"py-10"},k={key:1,class:"py-10"},q={class:"mb-2"},A={class:"text-2xl font-bold"},B=w({__name:"[slug]",async setup(I){let n,u;const h=y(),_=x(),g=r(h.params.slug),t=r(3),p=r(!0),i=r("");let s=null;const m=e=>e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${window.location.origin}${e}`:`${window.location.origin}/${e}`;try{s=([n,u]=R(()=>b("qrCodes",{filters:{slug:{$eq:g.value}}})),n=await n,u(),n)}catch(e){console.error("Error fetching QR code:",e)}if(s&&Array.isArray(s)&&s.length>0&&s[0]?.redirectUrl){i.value=`Redirecting you to the destination in ${t.value} seconds...`;const e=m(s[0].redirectUrl),o=f(()=>{t.value-=1,t.value<=0&&(clearInterval(o),window.location.href=e)},1e3)}else{i.value=`This QR code wasn't found. Redirecting to homepage in ${t.value} seconds...`;const e=f(()=>{t.value-=1,t.value<=0&&(clearInterval(e),_.push("/"))},1e3)}return p.value=!1,(e,o)=>(c(),l("div",$,[d(p)?(c(),l("div",C,[...o[0]||(o[0]=[a("p",null,"Loading...",-1)])])):(c(),l("div",k,[o[1]||(o[1]=a("h1",{class:"text-xl font-bold mb-4"},"QR Code Redirect",-1)),a("p",q,v(d(i)),1),a("p",A,v(d(t)),1)]))]))}});export{B as default};
