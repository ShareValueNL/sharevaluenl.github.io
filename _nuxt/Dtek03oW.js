import{d as y,a as x,b as R,r,w as b,e as l,u as c,f as a,t as v,o as d}from"./DfbAEhwh.js";import{u as $}from"./Ci1TRiRn.js";const _=window.setInterval,C={class:"qr-redirect-container p-4 max-w-md mx-auto text-center"},k={key:0,class:"py-10"},q={key:1,class:"py-10"},A={class:"mb-2"},I={class:"text-2xl font-bold"},W=y({__name:"[slug]",async setup(U){var f;let n,u;const h=x(),m=R(),g=r(h.params.slug),t=r(3),p=r(!0),i=r("");let s=null;const w=e=>e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${window.location.origin}${e}`:`${window.location.origin}/${e}`;try{s=([n,u]=b(()=>$("qrCodes",{filters:{slug:{$eq:g.value}}})),n=await n,u(),n)}catch(e){console.error("Error fetching QR code:",e)}if(s&&Array.isArray(s)&&s.length>0&&((f=s[0])!=null&&f.redirectUrl)){i.value=`Redirecting you to the destination in ${t.value} seconds...`;const e=w(s[0].redirectUrl),o=_(()=>{t.value-=1,t.value<=0&&(clearInterval(o),window.location.href=e)},1e3)}else{i.value=`This QR code wasn't found. Redirecting to homepage in ${t.value} seconds...`;const e=_(()=>{t.value-=1,t.value<=0&&(clearInterval(e),m.push("/"))},1e3)}return p.value=!1,(e,o)=>(d(),l("div",C,[c(p)?(d(),l("div",k,o[0]||(o[0]=[a("p",null,"Loading...",-1)]))):(d(),l("div",q,[o[1]||(o[1]=a("h1",{class:"text-xl font-bold mb-4"},"QR Code Redirect",-1)),a("p",A,v(c(i)),1),a("p",I,v(c(t)),1)]))]))}});export{W as default};
